Hi Ben, long overdue update. 

It is clear that I won’t be able to use the particle filter with the curvature correlation method.  I did however learn a few things that I think are important:

-	I have been looking at curvature extraction as a feature-based measurement model, when in reality it actually a correlation-based measurement model. 
	- In the feature-based model, features are defined as landmarks indicated by a range and a bearing (r, θ). In other words, the feature is decomposed to a single point that is fed to the algorithm. 
	- Correlation-based models are essentially scan-matching or scan-to-map matching. Their output are different in that they directly output the measurement probability.

Since the correlation-based model give out the measurement probability directly, I have been having a hard time how to integrate it with something such as the EKF. 

I tried something entirely different  without the curvature extraction and it seemed to work somewhat. It utilised the particle filter’s structure. 
1)	For each particle generated by the motion model, the single generated global map is projected onto this particle.  
![[Ideal match.png]]
![[Projecting global map to particles.png]]
2)	The weights are calculated using a scan-to-map matching algorithm. If the projected scan on the particle maps well to the map, the particle will have a high likelihood. The calculation of the weights are based on how much the projected local map has to be transformed to fit to the global map.
3)	Based on this weight, the particles are then resampled. 

Here is a comparison between the particle filter and the scan match particle filter in the python simulator: 
![[aut_localisation_comparison.svg]]
![[aut_Iteration_Time.svg]]
- The scan match version can correct itself when losing track around curves. 
- The computation time unfortunately is worse compared to the particle filter. 
- It also requires the initial position to be known as it can easily get stuck into a local minima otherwise. 
- These tests are done assuming the initial position is known,  This was a rough implementation but maybe it can still be optimized and improved. 
- I have not tried it in ros yet.  
- 
Do you think I should continue with this and see how far I get with this method. I am not using the curvature at all, so this may defeat the purpose somewhat. 

I did not however  leave the curvature method behind. I am still trying to find ways how I can use it. I think I made at least a little progress in that regard. Currently I am just trying to get a simple version working as you described previously. I will be working on this for the remainder of the week. 

Callen also suggested that we meet together for the next meeting to make sure everyone is on the same page.


